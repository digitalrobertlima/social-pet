<!doctype html>
<html lang="pt-BR" data-bs-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Social Pet ¬∑ Pr√©-Atendimento</title>
    <meta name="description" content="PWA de pr√©-atendimento para hotel, creche, banho e tosa ‚Äì Social Pet." />
    <meta name="application-name" content="Social Pet" />
    <meta name="theme-color" content="#0d6efd" />
    <meta name="color-scheme" content="light dark" />
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'><text y='1em' font-size='96'>üêæ</text></svg>">
    <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAACqK7WtAAAAn0lEQVR42u3XsQ2AIBAF0T+ipWCJgR0GcoDZJYHHEguqJuxkG9t4J3n1x6L0UAgAAAAAAAAAAgPnoxk51Y7ktZJ6tPPktWJ8gFoh8wCjHvW6Kz1mYnpCtgbPobx8dLTOceevKkOinZ5G2nGe2i6iXcQF0mZ4gP1I3yAXSYniA/UjfIBdJieID9SP5wrd/v5b62nzP47gAAAAAAAAAA4BYkA4sw6TLOAAAAAElFTkSuQmCC" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/custom.css" />
  </head>
  <body class="d-flex flex-column min-vh-100">
    <nav class="navbar navbar-expand-lg bg-body border-bottom sticky-top">
      <div class="container-fluid">
        <a class="navbar-brand fw-semibold" href="#"><span class="me-1">üêæ</span>Social Pet</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMain"><span class="navbar-toggler-icon"></span></button>
        <div id="navMain" class="collapse navbar-collapse">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0 small">
            <li class="nav-item"><a class="nav-link active" href="#wizard">Formul√°rio</a></li>
            <li class="nav-item"><a class="nav-link" href="#resumo">Resumo</a></li>
          </ul>
          <div class="d-flex gap-2 align-items-center flex-wrap">
            <button id="btnInstall" class="btn btn-outline-primary btn-sm d-none" type="button">üì≤ Instalar App</button>
            <button id="btnTheme" class="btn btn-outline-secondary btn-sm" type="button" aria-label="Alternar tema">üåó Tema</button>
            <button id="btnExport" class="btn btn-outline-secondary btn-sm" type="button">‚¨áÔ∏è Exportar</button>
            <input id="importFile" type="file" accept="application/json" class="d-none" />
            <button id="btnImport" class="btn btn-outline-secondary btn-sm" type="button">‚¨ÜÔ∏è Importar</button>
            <button id="btnReset" class="btn btn-outline-danger btn-sm" type="button">üóëÔ∏è Limpar</button>
          </div>
        </div>
      </div>
    </nav>

    <main class="flex-fill container my-4" id="wizard">
      <div class="mb-4">
        <div class="progress" role="progressbar" aria-label="Progresso" aria-valuemin="0" aria-valuemax="100">
          <div id="progressBar" class="progress-bar" style="width: 4%">1 / 4</div>
        </div>
      </div>
      <form id="preForm" novalidate class="needs-validation" autocomplete="off">
        <!-- STEP 1 Tutor -->
        <section class="step active" data-step="1" aria-labelledby="step1Title">
          <h2 id="step1Title" class="h5 mb-3">1. Dados do Tutor</h2>
          <div class="row g-3">
            <div class="col-md-4">
              <label for="tutorNome" class="form-label">Nome <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="tutorNome" name="tutorNome" required placeholder="Ex: Maria Silva" />
              <div class="invalid-feedback">Obrigat√≥rio.</div>
            </div>
            <div class="col-md-4">
              <label for="tutorTelefone" class="form-label">Telefone (WhatsApp) <span class="text-danger">*</span></label>
              <input type="tel" class="form-control" id="tutorTelefone" name="tutorTelefone" required pattern="[0-9()+\- ]{8,}" placeholder="DDD + n√∫mero" />
              <div class="invalid-feedback">Informe um telefone v√°lido.</div>
            </div>
            <div class="col-md-4">
              <label for="tutorEmail" class="form-label">E-mail</label>
              <input type="email" class="form-control" id="tutorEmail" name="tutorEmail" placeholder="email@exemplo.com" />
              <div class="invalid-feedback">E-mail inv√°lido.</div>
            </div>
            <div class="col-12">
              <label for="tutorObs" class="form-label">Observa√ß√µes gerais</label>
              <textarea id="tutorObs" name="tutorObs" rows="2" class="form-control" placeholder="Prefer√™ncias, orienta√ß√µes..."></textarea>
            </div>
          </div>
        </section>

        <!-- STEP 2 Pets -->
        <section class="step" data-step="2" aria-labelledby="step2Title">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <h2 id="step2Title" class="h5 mb-0">2. Pets</h2>
            <button id="btnAddPet" class="btn btn-primary btn-sm" type="button">‚ûï Adicionar Pet</button>
          </div>
          <p class="text-muted small mb-3">Cadastre todos os c√£es que participar√£o do(s) servi√ßo(s). Sem fotos no MVP.</p>
          <div id="petsContainer" class="row g-4"></div>
        </section>

        <!-- STEP 3 Servi√ßos -->
        <section class="step" data-step="3" aria-labelledby="step3Title">
          <h2 id="step3Title" class="h5 mb-3">3. Servi√ßos & Estadia</h2>
          <div class="row g-3 mb-2">
            <div class="col-md-4">
              <label for="tipoAtendimento" class="form-label">Tipo de Atendimento <span class="text-danger">*</span></label>
              <select id="tipoAtendimento" name="tipoAtendimento" class="form-select" required>
                <option value="" disabled selected>Selecione...</option>
                <option value="hotel">Hotel</option>
                <option value="creche">Creche (Daycare)</option>
                <option value="avulso">Banho/Tosa Avulso</option>
              </select>
              <div class="invalid-feedback">Obrigat√≥rio.</div>
            </div>
            <div class="col-md-4">
              <label for="pagamento" class="form-label">Forma Pagamento Preferida <span class="text-danger">*</span></label>
              <select id="pagamento" name="pagamento" class="form-select" required>
                <option value="" disabled selected>Selecione...</option>
                <option>PIX</option>
                <option>Cart√£o</option>
                <option>Dinheiro</option>
              </select>
              <div class="invalid-feedback">Informe a forma.</div>
            </div>
            <div class="col-md-4">
              <label for="frequenciaBanho" class="form-label">Banho durante estadia</label>
              <select id="frequenciaBanho" class="form-select" disabled>
                <option value="nao">Sem banho autom√°tico</option>
                <option value="checkout">Somente no check-out</option>
                <option value="1xsemana">1x por semana</option>
                <option value="2xsemana">2x por semana</option>
              </select>
            </div>
          </div>
          <div id="estadiaGroup" class="row g-3 d-none mt-1">
            <div class="col-md-3">
              <label for="dataEntrada" class="form-label">Data Entrada <span class="text-danger">*</span></label>
              <input type="date" id="dataEntrada" class="form-control" />
            </div>
            <div class="col-md-3">
              <label for="horaEntrada" class="form-label">Hora Entrada <span class="text-danger">*</span></label>
              <input type="time" id="horaEntrada" class="form-control" min="09:00" max="20:00" />
            </div>
            <div class="col-md-3">
              <label for="dataSaida" class="form-label">Data Sa√≠da <span class="text-danger">*</span></label>
              <input type="date" id="dataSaida" class="form-control" />
            </div>
            <div class="col-md-3">
              <label for="horaSaida" class="form-label">Hora Sa√≠da <span class="text-danger">*</span></label>
              <input type="time" id="horaSaida" class="form-control" min="09:00" max="20:00" />
            </div>
            <div class="col-12 small text-muted">Check-in e check-out somente de <strong>Segunda a Sexta at√© 18:00</strong>. Funcionamento geral: 09:00‚Äì20:00.</div>
          </div>
          <div id="avulsoGroup" class="row g-3 d-none mt-1">
            <div class="col-md-4">
              <label for="dataAvulso" class="form-label">Data Servi√ßo <span class="text-danger">*</span></label>
              <input type="date" id="dataAvulso" class="form-control" />
            </div>
            <div class="col-md-4">
              <label for="horaAvulso" class="form-label">Hora <span class="text-danger">*</span></label>
              <input type="time" id="horaAvulso" class="form-control" min="09:00" max="20:00" />
            </div>
            <div class="col-md-4">
              <label for="tipoAvulso" class="form-label">Servi√ßo Avulso <span class="text-danger">*</span></label>
              <select id="tipoAvulso" class="form-select">
                <option value="" disabled selected>Selecione...</option>
                <option value="banho">Banho</option>
                <option value="tosa">Tosa</option>
                <option value="banho_tosa">Banho + Tosa</option>
                <option value="outro">Outro</option>
              </select>
            </div>
          </div>
          <hr class="my-4" />
          <div class="row g-3">
            <div class="col-md-4">
              <label for="tosa" class="form-label">Tosa</label>
              <select id="tosa" class="form-select" disabled>
                <option value="nao">Sem tosa</option>
                <option value="higienica">Higi√™nica</option>
                <option value="padrao">Padr√£o</option>
                <option value="tesoura">Tesoura</option>
                <option value="tosquia">Tosquia</option>
                <option value="breed">Espec√≠fica da ra√ßa</option>
              </select>
            </div>
            <div class="col-md-4">
              <label for="medicacao" class="form-label">Medica√ß√£o?</label>
              <select id="medicacao" class="form-select">
                <option value="nao">N√£o</option>
                <option value="sim">Sim (detalhar)</option>
              </select>
            </div>
            <div class="col-md-4">
              <label for="alimentacaoEspecial" class="form-label">Alimenta√ß√£o Especial?</label>
              <select id="alimentacaoEspecial" class="form-select">
                <option value="nao">N√£o</option>
                <option value="sim">Sim (detalhar)</option>
              </select>
            </div>
            <div class="col-12 d-none" id="medicacaoDetalhesWrapper">
              <label for="medicacaoDetalhes" class="form-label">Detalhes Medica√ß√£o</label>
              <textarea id="medicacaoDetalhes" rows="2" class="form-control" placeholder="Nome, dosagem, hor√°rios..."></textarea>
            </div>
            <div class="col-12 d-none" id="alimentacaoDetalhesWrapper">
              <label for="alimentacaoDetalhes" class="form-label">Detalhes Alimenta√ß√£o</label>
              <textarea id="alimentacaoDetalhes" rows="2" class="form-control" placeholder="Ra√ß√£o, quantidade, frequ√™ncia..."></textarea>
            </div>
            <div class="col-12">
              <label for="cuidadosExtras" class="form-label">Cuidados Extras / Observa√ß√µes</label>
              <textarea id="cuidadosExtras" rows="2" class="form-control" placeholder="Ansioso √† noite, prefere brinquedo..."></textarea>
            </div>
          </div>
        </section>

        <!-- STEP 4 Termos & Resumo -->
        <section class="step" data-step="4" aria-labelledby="step4Title">
          <h2 id="step4Title" class="h5 mb-3">4. Termos & Gera√ß√£o da Mensagem</h2>
          <div class="alert alert-info small">
            Pol√≠tica de cancelamento: aviso com 7 dias de anteced√™ncia sem cobran√ßa (demais condi√ß√µes ser√£o alinhadas no WhatsApp). Dados usados apenas para contato e presta√ß√£o do servi√ßo (LGPD).
          </div>
          <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="aceiteTermos" required />
            <label class="form-check-label" for="aceiteTermos">Aceito os termos e autorizo o uso dos dados conforme descrito.</label>
            <div class="invalid-feedback">Obrigat√≥rio aceitar os termos.</div>
          </div>
          <div class="d-flex flex-wrap gap-2 mb-3">
            <button type="button" id="btnGerar" class="btn btn-primary">üí¨ Gerar Mensagem WhatsApp</button>
            <button type="button" id="btnCopy" class="btn btn-outline-secondary" disabled>üìã Copiar</button>
            <a id="btnWhatsApp" class="btn btn-outline-success disabled" target="_blank" rel="noopener">Abrir WhatsApp</a>
          </div>
          <div class="mb-3">
            <label for="mensagemFinal" class="form-label">Mensagem Gerada</label>
            <textarea id="mensagemFinal" rows="10" class="form-control font-monospace" readonly placeholder="Gere a mensagem..."></textarea>
          </div>
          <div id="resumo" class="small"></div>
        </section>

        <div class="d-flex justify-content-between mt-4">
          <button type="button" id="btnPrev" class="btn btn-outline-secondary" disabled>‚Üê Voltar</button>
          <div class="d-flex gap-2">
            <span id="statusMsg" class="align-self-center small text-secondary"></span>
            <button type="button" id="btnNext" class="btn btn-primary">Pr√≥ximo ‚Üí</button>
          </div>
        </div>
      </form>
    </main>

    <footer class="mt-auto py-4 bg-body-tertiary border-top small text-center text-muted">
      <p class="mb-1">&copy; <span id="year"></span> Social Pet ‚Ä¢ PWA MVP (offline ready)</p>
      <p class="mb-0">Nenhum valor √© exibido aqui; finaliza√ß√£o no WhatsApp.</p>
    </footer>

    <!-- Templates -->
    <template id="petTemplate">
      <div class="col-12" data-pet-card>
        <div class="card shadow-sm h-100">
          <div class="card-header d-flex justify-content-between align-items-center py-2">
            <span class="small fw-semibold">Pet</span>
            <button type="button" class="btn btn-sm btn-outline-danger remove-pet" title="Remover" aria-label="Remover pet">‚úñ</button>
          </div>
          <div class="card-body small">
            <div class="row g-2">
              <div class="col-sm-3">
                <label class="form-label">Nome <span class="text-danger">*</span></label>
                <input name="nome" class="form-control form-control-sm" required />
              </div>
              <div class="col-sm-3">
                <label class="form-label">Porte <span class="text-danger">*</span></label>
                <select name="porte" class="form-select form-select-sm" required>
                  <option value="" disabled selected>...</option>
                  <option>Mini</option><option>Pequeno</option><option>M√©dio</option><option>Grande</option><option>Gigante</option>
                </select>
              </div>
              <div class="col-sm-3">
                <label class="form-label">Ra√ßa</label>
                <input name="raca" class="form-control form-control-sm" placeholder="SRD..." />
              </div>
              <div class="col-sm-3">
                <label class="form-label">Idade (anos)</label>
                <input type="number" name="idade" min="0" step="0.1" class="form-control form-control-sm" />
              </div>
              <div class="col-sm-3">
                <label class="form-label">Peso (kg)</label>
                <input type="number" name="peso" min="0" step="0.1" class="form-control form-control-sm" />
              </div>
              <div class="col-sm-3">
                <label class="form-label">Sexo</label>
                <select name="sexo" class="form-select form-select-sm">
                  <option>Macho</option><option>F√™mea</option>
                </select>
              </div>
              <div class="col-sm-3">
                <label class="form-label">Comportamento</label>
                <select name="comportamento" class="form-select form-select-sm">
                  <option>Soci√°vel</option><option>Calmo</option><option>Ansioso</option><option>Medroso</option><option>Reativo</option><option>Agressivo</option>
                </select>
              </div>
              <div class="col-sm-3">
                <label class="form-label">Vacinas</label>
                <div class="d-flex flex-wrap gap-1">
                  <label class="form-check form-check-inline m-0 small"><input class="form-check-input" type="checkbox" name="vac_V8" />V8/V10</label>
                  <label class="form-check form-check-inline m-0 small"><input class="form-check-input" type="checkbox" name="vac_antirrabica" />Antirr√°bica</label>
                  <label class="form-check form-check-inline m-0 small"><input class="form-check-input" type="checkbox" name="vac_gripe" />Gripe</label>
                  <label class="form-check form-check-inline m-0 small"><input class="form-check-input" type="checkbox" name="vac_giardia" />Giardia</label>
                </div>
              </div>
              <div class="col-12">
                <label class="form-label">Restri√ß√µes / Alergias</label>
                <input name="restricoes" class="form-control form-control-sm" />
              </div>
              <div class="col-12">
                <label class="form-label">Observa√ß√µes Sa√∫de</label>
                <textarea name="observacoes" rows="2" class="form-control form-control-sm" placeholder="Vermifuga√ß√£o, comportamento, etc."></textarea>
              </div>
            </div>
          </div>
        </div>
      </div>
    </template>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous" defer></script>
    <script src="assets/js/app.js" type="module" defer></script>
  </body>
</html>
